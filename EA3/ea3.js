// EA3 - Farbig gefüllte 2D Geometrie
"use strict";

var canvas = document.getElementById('canvas');
var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');

if (!gl) {
    alert('WebGL wird von deinem Browser nicht unterstützt!');
}

function getShaderSource(id) {
    return document.getElementById(id).textContent;
}

function compileShader(source, type) {
    var shader = gl.createShader(type);
    gl.shaderSource(shader, source);
    gl.compileShader(shader);

    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        console.error('Shader Fehler:', gl.getShaderInfoLog(shader));
        gl.deleteShader(shader);
        return null;
    }

    return shader;
}

function createProgram(vertexShader, fragmentShader) {
    var program = gl.createProgram();
    gl.attachShader(program, vertexShader);
    gl.attachShader(program, fragmentShader);
    gl.linkProgram(program);

    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
        console.error('Program Fehler:', gl.getProgramInfoLog(program));
        return null;
    }

    return program;
}

var vertexShaderSource = getShaderSource('vertex-shader');
var vertexShader = compileShader(vertexShaderSource, gl.VERTEX_SHADER);

var fragmentShaderSource = getShaderSource('fragment-shader');
var fragmentShader = compileShader(fragmentShaderSource, gl.FRAGMENT_SHADER);

var program = createProgram(vertexShader, fragmentShader);
gl.useProgram(program);

var vertices = [
    -0.4634,  0.8107,
    -0.5335,  0.8107,
    -0.4942,  0.9410,
    -0.5170,  0.6873,
    -0.6243,  0.4678,
    -0.5951,  0.7453,
    -0.5117,  0.4462,
    -0.6243,  0.4230,
    -0.6243,  0.4678,
     0.1291, -0.0148,
    -0.3260, -0.0809,
    -0.1986,  0.1834,
    -0.6627, -0.2679,
    -0.7483, -0.2935,
    -0.7165, -0.0436,
    -0.5106,  0.0729,
    -0.5144,  0.2677,
    -0.4132,  0.2438,
     0.4228, -0.5609,
     0.2115, -0.3522,
     0.3644, -0.0498,
     0.2974, -0.8668,
     0.1509, -0.8613,
     0.3227, -0.7401,
     0.0721, -0.3312,
    -0.3260, -0.0809,
     0.1291, -0.0148,
     0.5188,  0.0178,
     0.1291, -0.0148,
     0.3519,  0.0860,
    -0.7610, -0.3902,
    -0.7483, -0.2935,
    -0.6627, -0.2679,
     0.0720, -0.9346,
     0.1509, -0.8613,
     0.2974, -0.8668,
    -0.6627, -0.2679,
    -0.7165, -0.0436,
    -0.6262, -0.1085,
    -0.3783,  0.6131,
    -0.4408,  0.5107,
    -0.3114,  0.3977,
    -0.3114,  0.3977,
    -0.5144,  0.2677,
    -0.1986,  0.1834,
    -0.3546,  0.7782,
    -0.3783,  0.6131,
     0.0312,  0.3918,
    -0.5170,  0.6873,
    -0.6243,  0.4678,
    -0.4718,  0.6599,
     0.0312,  0.3918,
    -0.1986,  0.1834,
     0.0626,  0.2905,
     0.2413, -0.5200,
     0.3227, -0.7401,
     0.4228, -0.5609,
     0.3227, -0.7401,
     0.2974, -0.8668,
     0.4717, -0.7432,
     0.1291, -0.0148,
     0.2115, -0.3522,
     0.3644, -0.0498,
     0.3644, -0.0498,
     0.6280, -0.4217,
     0.6575, -0.0950,
    -0.4776,  0.8709,
    -0.4634,  0.8107,
    -0.3439,  0.8835,
    -0.3439,  0.8835,
    -0.3546,  0.7782,
    -0.2298,  0.8241,
    -0.5600,  0.8140,
    -0.5170,  0.6873,
    -0.4634,  0.8107,
    -0.4718,  0.6599,
    -0.4408,  0.5107,
    -0.3546,  0.7782,
     0.6951, -0.2933,
     0.6272, -0.4206,
     0.7209, -0.5216,
     0.7209, -0.5216,
     0.6106, -0.5784,
     0.7670, -0.8668,
    -0.4132,  0.2438,
    -0.5106,  0.0729,
    -0.3260, -0.0809,
     0.2974, -0.8668,
     0.0720, -0.9346,
     0.2101, -0.9310,
     0.4228, -0.5609,
     0.3227, -0.7401,
     0.4717, -0.7432,
    -0.6627, -0.2679,
    -0.7610, -0.3902,
    -0.6680, -0.3717,
     0.3644, -0.0498,
     0.4228, -0.5609,
     0.6272, -0.4206,
     0.6568, -0.0939,
     0.6272, -0.4206,
     0.6951, -0.2933,
     0.6272, -0.4206,
     0.6106, -0.5784,
     0.7209, -0.5216,
     0.7209, -0.5216,
     0.7670, -0.8668,
     0.8192, -0.6953,
    -0.1986,  0.1834,
     0.0312,  0.3918,
    -0.3114,  0.3977,
     0.3519,  0.0860,
     0.0626,  0.2905,
    -0.1986,  0.1834,
    -0.3260, -0.0809,
    -0.5106,  0.0729,
    -0.6262, -0.1085,
     0.0721, -0.3312,
     0.2115, -0.3522,
     0.1291, -0.0148,
    -0.4718,  0.6599,
    -0.5117,  0.4462,
    -0.4408,  0.5107,
    -0.3546,  0.7782,
    -0.5170,  0.6873,
    -0.4718,  0.6599,
    -0.3439,  0.8835,
    -0.4634,  0.8107,
    -0.3546,  0.7782,
    -0.2298,  0.8241,
    -0.3546,  0.7782,
    -0.0602,  0.4834,
    -0.3546,  0.7782,
    -0.4408,  0.5107,
    -0.3783,  0.6131,
    -0.5117,  0.4462,
    -0.5951,  0.3977,
    -0.5117,  0.3977,
    -0.5600,  0.8140,
    -0.5951,  0.7453,
    -0.5170,  0.6873,
    -0.5214,  0.8507,
    -0.5600,  0.8140,
    -0.5328,  0.8131,
    -0.5106,  0.0729,
    -0.7165, -0.0436,
    -0.6262, -0.1085,
    -0.3783,  0.6131,
    -0.3114,  0.3977,
     0.0312,  0.3918,
    -0.4408,  0.5107,
    -0.4478,  0.3104,
    -0.3114,  0.3977,
    -0.4634,  0.8107,
    -0.5170,  0.6873,
    -0.3546,  0.7782,
    -0.4718,  0.6599,
    -0.6243,  0.4678,
    -0.5117,  0.4462,
     0.5188,  0.0178,
     0.1291, -0.0148,
     0.6568, -0.0939,
     0.2115, -0.3522,
     0.2413, -0.5200,
     0.4228, -0.5609,
     0.6578, -0.6658,
     0.6346, -0.7908,
     0.7670, -0.8668,
    -0.4152,  0.2414,
    -0.3260, -0.0809,
    -0.1986,  0.1834,
    -0.1986,  0.1834,
     0.1291, -0.0148,
     0.3519,  0.0860,
    -0.5117,  0.4462,
    -0.6243,  0.4230,
    -0.5951,  0.3977,
];

var colors = [
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    1.000, 0.984, 0.722,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.686, 0.090, 0.247,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    0.349, 0.027, 0.125,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
    1.000, 0.859, 0.733,
];

var indices = [
      0,   1,   2,
      3,   4,   5,
      6,   7,   8,
      9,  10,  11,
     12,  13,  14,
     15,  16,  17,
     18,  19,  20,
     21,  22,  23,
     24,  25,  26,
     27,  28,  29,
     30,  31,  32,
     33,  34,  35,
     36,  37,  38,
     39,  40,  41,
     42,  43,  44,
     45,  46,  47,
     48,  49,  50,
     51,  52,  53,
     54,  55,  56,
     57,  58,  59,
     60,  61,  62,
     63,  64,  65,
     66,  67,  68,
     69,  70,  71,
     72,  73,  74,
     75,  76,  77,
     78,  79,  80,
     81,  82,  83,
     84,  85,  86,
     87,  88,  89,
     90,  91,  92,
     93,  94,  95,
     96,  97,  98,
     99, 100, 101,
    102, 103, 104,
    105, 106, 107,
    108, 109, 110,
    111, 112, 113,
    114, 115, 116,
    117, 118, 119,
    120, 121, 122,
    123, 124, 125,
    126, 127, 128,
    129, 130, 131,
    132, 133, 134,
    135, 136, 137,
    138, 139, 140,
    141, 142, 143,
    144, 145, 146,
    147, 148, 149,
    150, 151, 152,
    153, 154, 155,
    156, 157, 158,
    159, 160, 161,
    162, 163, 164,
    165, 166, 167,
    168, 169, 170,
    171, 172, 173,
    174, 175, 176,
];

var vertexBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

var aPosition = gl.getAttribLocation(program, 'aPosition');
gl.vertexAttribPointer(aPosition, 2, gl.FLOAT, false, 0, 0);
gl.enableVertexAttribArray(aPosition);

var colorBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);

var aColor = gl.getAttribLocation(program, 'aColor');
gl.vertexAttribPointer(aColor, 3, gl.FLOAT, false, 0, 0);
gl.enableVertexAttribArray(aColor);

var indexBuffer = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);

gl.clearColor(0.96, 0.97, 0.97, 1.0);
gl.clear(gl.COLOR_BUFFER_BIT);
gl.drawElements(gl.TRIANGLES, 177, gl.UNSIGNED_SHORT, 0);
